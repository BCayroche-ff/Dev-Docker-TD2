# ===========================================
# Redis Service
# ===========================================
# Service ClusterIP pour accéder à Redis depuis
# les autres Pods (backend notamment).
#
# DNS RESOLUTION :
# - redis-service.greenwatt.svc.cluster.local
# - Forme courte : redis-service (dans le même namespace)
#
# UTILISÉ PAR :
# - Backend : REDIS_URL=redis://redis-service:6379
#
# ===========================================

apiVersion: v1
kind: Service
metadata:
  name: redis-service
  namespace: greenwatt
  labels:
    app: greenwatt
    component: cache
spec:
  type: ClusterIP  # Interne uniquement
  selector:
    app: greenwatt
    component: cache
  ports:
  - name: redis
    protocol: TCP
    port: 6379        # Port du Service
    targetPort: 6379  # Port du conteneur Redis
